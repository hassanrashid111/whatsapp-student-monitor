<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>منصة الشريف التعليمية | لوحة تحكم المشرف</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <!-- FontAwesome for Icons (Free CDN) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>

  <body>
    <!-- Login Overlay -->
    <div id="login-view" class="login-container">
      <div class="login-card">
        <div class="login-icon">
          <i class="fa-solid fa-mosque"></i>
        </div>
        <h1>صفحة تسجيل الدخول</h1>
        <p class="subtitle">لوحة تحكم المشرف - الدورة الإسلامية عبر الإنترنت</p>

        <form id="login-form">
          <div class="input-group">
            <label>اسم المستخدم</label>
            <div class="input-wrapper">
              <input
                type="text"
                id="username"
                placeholder="أدخل اسم المستخدم"
                required
              />
              <i class="fa-solid fa-user"></i>
            </div>
          </div>
          <div class="input-group">
            <label>كلمة المرور</label>
            <div class="input-wrapper">
              <input
                type="password"
                id="password"
                placeholder="أدخل كلمة المرور"
                required
              />
              <i class="fa-solid fa-lock"></i>
              <i class="fa-solid fa-eye-slash toggle-pass"></i>
              <!-- Simplified, not putting logic yet -->
            </div>
          </div>

          <div class="options">
            <label><input type="checkbox" /> تذكرني</label>
            <a href="#">نسيت كلمة المرور؟</a>
          </div>

          <button type="submit" class="btn-login">
            تسجيل الدخول <i class="fa-solid fa-arrow-right-to-bracket"></i>
          </button>
        </form>

        <div class="login-footer">
          <i class="fa-solid fa-shield-halved"></i> البيانات محفوظة بشكل آمن على
          هذا الجهاز
        </div>
      </div>
      <div class="copyright">© 2025 منصة التعليم الإسلامي المتقدمة</div>
    </div>

    <!-- Dashboard View -->
    <div id="dashboard-view" class="dashboard-container" style="display: none">
      <!-- Header -->
      <header class="main-header">
        <div class="header-right">
          <div class="logo-area">
            <i class="fa-solid fa-mosque logo-icon"></i>
            <div>
              <h2>منصة الشريف التعليمية</h2>
              <span>لوحة تحكم المشرف العام</span>
            </div>
          </div>
        </div>

        <div class="header-left">
          <button class="btn-action" onclick="window.app.addStudent()">
            <i class="fa-solid fa-user-plus"></i> إضافة طالب
          </button>
          <button class="btn-action" onclick="window.app.exportData()">
            <i class="fa-solid fa-file-excel"></i> تصدير Excel
          </button>
          <button class="btn-action" onclick="window.app.addLecture()">
            <i class="fa-solid fa-plus-circle"></i> إضافة محاضرة
          </button>
          <button class="btn-logout" onclick="window.app.logout()">
            <i class="fa-solid fa-arrow-right-from-bracket"></i> تسجيل الخروج
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <div class="page-title-area">
          <h1>سجل متابعة الطلاب</h1>
          <p>إدارة الحضور والغياب وإرسال رسائل المتابعة الدورية</p>
          <div class="filters">
            <span
              >نشط <i class="fa-solid fa-circle" style="color: #1a5d3a"></i
            ></span>
            <span
              >مختبر/مكتمل
              <i class="fa-solid fa-circle" style="color: #95a5a6"></i
            ></span>
          </div>
        </div>

        <!-- Table Section -->
        <div class="table-card">
          <div class="table-responsive">
            <table id="students-table">
              <thead>
                <tr id="table-header-row">
                  <!-- Generated by JS -->
                  <th>#</th>
                  <th>اسم الطالب</th>
                  <th>رقم الهاتف</th>
                  <!-- Dynamic Lecture Columns Here -->
                </tr>
              </thead>
              <tbody id="students-body">
                <!-- Generated by JS -->
              </tbody>
            </table>
          </div>
          <div class="pagination">
            <span>عرض 1 إلى 4 من أصل 45 طالب</span>
            <div class="page-controls">
              <button disabled>السابق</button>
              <button class="active">1</button>
              <button>2</button>
              <button>3</button>
              <button>التالي</button>
            </div>
          </div>
        </div>

        <!-- Bottom Grid Section -->
        <div class="bottom-grid">
          <!-- Summary Card -->
          <div class="card summary-card">
            <div class="card-header">
              <h3>ملخص اليوم</h3>
              <p class="date-display">السبت، 15 رجب 1446 هـ</p>
            </div>
            <div class="stats-list">
              <div class="stat-item total">
                <span>عدد الطلاب الكلي</span>
                <strong id="stat-total">0</strong>
              </div>
              <div class="stat-item absence">
                <span>الغياب اليوم</span>
                <!-- "Absence Today" - meaning unchecked for latest -->
                <strong id="stat-absence">0</strong>
              </div>
              <div class="stat-item remaining">
                <span>المحاضرات المتبقية</span>
                <strong id="stat-remaining">0</strong>
              </div>
            </div>
            <div class="quote-box">
              <i class="fa-solid fa-quote-right quote-icon"></i>
              <p>
                "من دعا إلى هدى كان له من الأجر مثل أجور من تبعه، لا ينقص ذلك من أجورهم شيئاً، ومن دعا إلى ضلالة كان عليه من الإثم مثل آثام من تبعه لا ينقص ذلك من آثامهم شيئاً"
              </p>
            </div>
          </div>

          <!-- Messaging Card -->
          <div class="card messaging-card">
            <div class="card-header-row">
              <div class="icon-sq">
                <i class="fa-solid fa-envelope-open-text"></i>
              </div>
              <div>
                <h3>رسالة المتابعة لليوم</h3>
                <p>قم بصياغة الرسالة التي سيتم إرسالها للطلاب المتغيبين</p>
              </div>
            </div>

            <div class="message-body">
              <textarea
                id="message-text"
                placeholder="السلام عليكم، نود تذكيركم بموعد تسليم الواجبات يوم الخميس القادم..."
              ></textarea>

              <div class="alert-box">
                <i class="fa-solid fa-circle-info"></i>
                <p>
                  ملاحظة: لن يتم إرسال الرسالة للطلاب الذين تم تحديدهم في الجدول
                  أعلاه كمختبرين أو مكتملين لهذه المحاضرة.
                </p>
              </div>

              <div class="action-row">
                <button
                  class="btn-whatsapp"
                  onclick="window.app.sendMessages()"
                >
                  إرسال الرسالة عبر واتساب
                  <i class="fa-solid fa-paper-plane"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="main-footer">
        <h3>وَقُل رَّبِّ زِدْنِي عِلْمًا</h3>
        <p>© 2025 | Made with ❤️ and Code by Hassan Rashid</p>
      </footer>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
